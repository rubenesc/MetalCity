<?xml version='1.0' encoding='UTF-8'?>

<!-- =========== FULL CONFIGURATION FILE ================================== -->

<faces-config version="2.0"
    xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd">
    <!--
        well right now I dont need this PhaseListener, but maybe in the future I will,
        so I'll just leave it here comented.
    <lifecycle>
        <phase-listener>co.com.metallium.view.jsf.filter.JsfPhaseListener</phase-listener>
    </lifecycle>
    -->
    <!-- this little factory just happens to solve the ViewExpiredException feature JSF has.
         and I also added code there to solve the cute little class cast exception that happens all the time.
     -->
    <factory>
        <exception-handler-factory>co.com.metallium.view.jsf.filter.ViewExpiredExceptionHandlerFactory</exception-handler-factory>
    </factory>
    <lifecycle>
        <!-- When the user logs in, converts the POST request to GET request, so he can see his profile correctly 
        <phase-listener>co.com.metallium.view.jsf.filter.ProfilePhaseListener</phase-listener>
        -->
        <!-- Autologin -->
        <phase-listener>co.com.metallium.view.jsf.filter.AutoLoginPhaseListener</phase-listener>
    </lifecycle>
    <application>
        <locale-config>
            <default-locale>en</default-locale>
            <supported-locale>es</supported-locale>
        </locale-config>
        <resource-bundle>
            <base-name>messages</base-name>
            <var>msg</var>
        </resource-bundle>
        <resource-bundle>
            <base-name>/Bundle</base-name>
            <var>bundle</var>
        </resource-bundle>
    </application>
    <converter>
        <converter-id>playlistOrderConverter</converter-id>
        <converter-class>co.com.metallium.view.jsf.jukebox.PlaylistOrderConverter</converter-class>
    </converter>    
    <navigation-rule>
        <from-view-id>*</from-view-id>
        <navigation-case>
            <from-outcome>goToIndex</from-outcome>
            <!--
            <to-view-id>/portal/jukebox/search.xhtml</to-view-id>
            -->
            <to-view-id>/portal/index.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToJukebox</from-outcome>
            <to-view-id>/portal/jukebox/search.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToNews</from-outcome>
            <to-view-id>/portal/news/news.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToNewsList</from-outcome>
            <to-view-id>/portal/news/newslist.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToNewsCreate</from-outcome>
            <to-view-id>/portal/news/create/newscreate.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToNewsEdit</from-outcome>
            <to-view-id>/portal/news/edit/newsedit.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToNewsControlRoom</from-outcome>
            <to-view-id>/portal/news/controlroom/newscontrolroom.xhtml</to-view-id>
            <redirect/>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToEventControlRoom</from-outcome>
            <to-view-id>/portal/events/controlroom/eventcontrolroom.xhtml</to-view-id>
            <redirect/>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToEvent</from-outcome>
            <to-view-id>/portal/events/event.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToEventList</from-outcome>
            <to-view-id>/portal/events/eventlist.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToEventCreate</from-outcome>
            <to-view-id>/portal/events/create/eventcreate.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToEventEdit</from-outcome>
            <to-view-id>/portal/events/edit/eventedit.xhtml</to-view-id>
        </navigation-case>
        <!-- Start Forums
        <navigation-case>
            <from-outcome>goToForumControlRoom</from-outcome>
            <to-view-id>/portal/events/controlroom/eventcontrolroom.xhtml</to-view-id>
            <redirect/>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToEventCreate</from-outcome>
            <to-view-id>/portal/events/create/eventcreate.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToEventEdit</from-outcome>
            <to-view-id>/portal/events/edit/eventedit.xhtml</to-view-id>
        </navigation-case>
        -->
        <navigation-case>
            <from-outcome>goToForumCategories</from-outcome>
            <to-view-id>/portal/forums/forumcategories.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToForumList</from-outcome>
            <to-view-id>/portal/forums/forumlist.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToForum</from-outcome>
            <to-view-id>/portal/forums/forum.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToForumCreate</from-outcome>
            <to-view-id>/portal/forums/create.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToForumEdit</from-outcome>
            <to-view-id>/portal/forums/edit.xhtml</to-view-id>
        </navigation-case>
        
        <!-- End Forums -->

        <navigation-case>
            <from-outcome>goToProfile</from-outcome>
            <to-view-id>/portal/user/profile/profile.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToProfileFriends</from-outcome>
            <to-view-id>/portal/user/profile/profileFriends.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToRegisterUser</from-outcome>
            <to-view-id>/portal/user/register/register.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToRegistrationVerification</from-outcome>
            <to-view-id>/portal/user/register/registrationverification.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToLogin</from-outcome>
            <to-view-id>/portal/user/login.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToEditProfile</from-outcome>
            <to-view-id>/portal/user/edit/editprofile.xhtml</to-view-id>
        </navigation-case>
        <!-- Start Image Gallery -->
        <navigation-case>
            <from-outcome>goToGalleries</from-outcome>
            <to-view-id>/portal/gallery/galleries.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToGallery</from-outcome>
            <to-view-id>/portal/gallery/gallery.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToCreateGallery</from-outcome>
            <to-view-id>/portal/gallery/creategallery.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToUploadImagesToGallery</from-outcome>
            <to-view-id>/portal/gallery/uploadimagesgallery.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToProfileConfiguration</from-outcome>
            <to-view-id>/portal/user/configuration/configuration.xhtml</to-view-id>
        </navigation-case>
        <!-- End Image Gallery -->
        <navigation-case>
            <from-outcome>goToMessageBox</from-outcome>
            <to-view-id>/portal/messages/messagebox.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToMessage</from-outcome>
            <to-view-id>/portal/messages/message.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToSearch</from-outcome>
            <to-view-id>/portal/search/search.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToUserNotifications</from-outcome>
            <to-view-id>/portal/notifications/notifications.xhtml</to-view-id>
        </navigation-case>
        <!-- Start Info Pages -->
        <navigation-case>
            <from-outcome>goToInfoPoweredBy</from-outcome>
            <to-view-id>/portal/common/info/poweredby</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToInfoPrivacy</from-outcome>
            <to-view-id>/portal/common/info/privacy.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToInfoTerms</from-outcome>
            <to-view-id>/portal/common/info/terms.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToInfoAbout</from-outcome>
            <to-view-id>/portal/common/info/about.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToInfoHelp</from-outcome>
            <to-view-id>/portal/common/info/help.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>goToInfoContact</from-outcome>
            <to-view-id>/portal/common/info/contact.xhtml</to-view-id>
        </navigation-case>
        <!-- End Info Pages -->
    </navigation-rule>
    <navigation-rule>
        <from-view-id>/portal/user/register.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>registerOK</from-outcome>
            <to-view-id>/portal/user/profile.xhtml</to-view-id>
        </navigation-case>
    </navigation-rule>
</faces-config>

